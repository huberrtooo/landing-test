{
    "sourceFile": "wp-content/themes/landingtesttheme/functions.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1678000726561,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1678000726561,
            "name": "Commit-0",
            "content": "<?php\n\n// dynamic adding .css and .js to head\nfunction scripts()\n{\n\t$dirJS = new DirectoryIterator(get_stylesheet_directory() . '/dist');\n\tforeach ($dirJS as $file) {\n\t\tif (pathinfo($file, PATHINFO_EXTENSION) === 'css') {\n\t\t\t$cssName = basename($file);\n\n\t\t\twp_enqueue_style('style', get_template_directory_uri() . '/dist/' . $cssName, null, null, 'all');\n\t\t}\n\t\tif (pathinfo($file, PATHINFO_EXTENSION) === 'js') {\n\t\t\t$jsName = basename($file);\n\t\t\t$name = substr(basename($jsName), 0, strpos(basename($jsName), '.'));\n\t\t\tswitch ($name) {\n\t\t\t\tcase 'main':\n\t\t\t\t\t$deps = array('vendor');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$deps = array('jquery');\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\twp_enqueue_script($name, get_template_directory_uri() . '/dist/' . $jsName, $deps, '1.0', true);\n\t\t}\n\t}\n}\nadd_action('wp_enqueue_scripts', 'scripts');\n\n\n\n// theme support\nfunction config_custom_theme()\n{\n\tadd_theme_support('post-thumbnails');\n\tadd_post_type_support('page', 'excerpt');\n\tadd_theme_support('custom-logo');\n\tadd_theme_support('widgets');\n\tadd_theme_support('widgets-block-editor');\n\tadd_theme_support('woocommerce', [\n\t\t'thumbnail_image_width' => 300,\n\t\t'gallery_thumbnail_image_width' => 100,\n\t\t'single_image_width' => 500,\n\t]);\n}\nadd_action('after_setup_theme', 'config_custom_theme');\n\n\n\n// register menu\nregister_nav_menus([\n\t'header-menu' => __('Menu główne'),\n\t'footer-features' => __('Menu Features'),\n\t'footer-services' => __('Menu Services'),\n\t'footer-support' => __('Menu Support'),\n]);\n\n\n// bootstrap 5 wp_nav_menu walker\nclass bootstrap_5_wp_nav_menu_walker extends Walker_Nav_menu\n{\n\tprivate $current_item;\n\tprivate $dropdown_menu_alignment_values = [\n\t\t'dropdown-menu-start',\n\t\t'dropdown-menu-end',\n\t\t'dropdown-menu-sm-start',\n\t\t'dropdown-menu-sm-end',\n\t\t'dropdown-menu-md-start',\n\t\t'dropdown-menu-md-end',\n\t\t'dropdown-menu-lg-start',\n\t\t'dropdown-menu-lg-end',\n\t\t'dropdown-menu-xl-start',\n\t\t'dropdown-menu-xl-end',\n\t\t'dropdown-menu-xxl-start',\n\t\t'dropdown-menu-xxl-end'\n\t];\n\n\tfunction start_lvl(&$output, $depth = 0, $args = null)\n\t{\n\t\t$dropdown_menu_class[] = '';\n\t\tforeach ($this->current_item->classes as $class) {\n\t\t\tif (in_array($class, $this->dropdown_menu_alignment_values)) {\n\t\t\t\t$dropdown_menu_class[] = $class;\n\t\t\t}\n\t\t}\n\t\t$indent = str_repeat(\"\\t\", $depth);\n\t\t$submenu = ($depth > 0) ? ' sub-menu' : '';\n\t\t$output .= \"\\n$indent<ul class=\\\"dropdown-menu$submenu \" . esc_attr(implode(\" \", $dropdown_menu_class)) . \" depth_$depth\\\">\\n\";\n\t}\n\n\tfunction start_el(&$output, $item, $depth = 0, $args = null, $id = 0)\n\t{\n\t\t$this->current_item = $item;\n\n\t\t$indent = ($depth) ? str_repeat(\"\\t\", $depth) : '';\n\n\t\t$li_attributes = '';\n\t\t$class_names = $value = '';\n\n\t\t$classes = empty($item->classes) ? array() : (array) $item->classes;\n\n\t\t$classes[] = ($args->walker->has_children) ? 'dropdown' : '';\n\t\t$classes[] = 'nav-item';\n\t\t$classes[] = 'nav-item-' . $item->ID;\n\t\tif ($depth && $args->walker->has_children) {\n\t\t\t$classes[] = 'dropdown-menu dropdown-menu-end';\n\t\t}\n\n\t\t$class_names =  join(' ', apply_filters('nav_menu_css_class', array_filter($classes), $item, $args));\n\t\t$class_names = ' class=\"' . esc_attr($class_names) . '\"';\n\n\t\t$id = apply_filters('nav_menu_item_id', 'menu-item-' . $item->ID, $item, $args);\n\t\t$id = strlen($id) ? ' id=\"' . esc_attr($id) . '\"' : '';\n\n\t\t$output .= $indent . '<li ' . $id . $value . $class_names . $li_attributes . '>';\n\n\t\t$attributes = !empty($item->attr_title) ? ' title=\"' . esc_attr($item->attr_title) . '\"' : '';\n\t\t$attributes .= !empty($item->target) ? ' target=\"' . esc_attr($item->target) . '\"' : '';\n\t\t$attributes .= !empty($item->xfn) ? ' rel=\"' . esc_attr($item->xfn) . '\"' : '';\n\t\t$attributes .= !empty($item->url) ? ' href=\"' . esc_attr($item->url) . '\"' : '';\n\n\t\t$active_class = ($item->current || $item->current_item_ancestor || in_array(\"current_page_parent\", $item->classes, true) || in_array(\"current-post-ancestor\", $item->classes, true)) ? 'active' : '';\n\t\t$nav_link_class = ($depth > 0) ? 'dropdown-item ' : 'nav-link ';\n\t\t$attributes .= ($args->walker->has_children) ? ' class=\"' . $nav_link_class . $active_class . ' dropdown-toggle\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"' : ' class=\"' . $nav_link_class . $active_class . '\"';\n\n\t\t$item_output = $args->before;\n\t\t$item_output .= '<a' . $attributes . '>';\n\t\t$item_output .= $args->link_before . apply_filters('the_title', $item->title, $item->ID) . $args->link_after;\n\t\t$item_output .= '</a>';\n\t\t$item_output .= $args->after;\n\n\t\t$output .= apply_filters('walker_nav_menu_start_el', $item_output, $item, $depth, $args);\n\t}\n}"
        }
    ]
}